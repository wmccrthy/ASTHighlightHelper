Fix DiffUtils inconsistencies that require redundant logic in TreeNode
